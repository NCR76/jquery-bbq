/*!
 * jQuery BBQ: Back Button & Query Library - v1.3pre - 8/26/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
!function(s){var p,f,r,l,e,n,o,c,h,d,m,i,v,a=Array.prototype.slice,g=decodeURIComponent,u=s.param,t=s.bbq=s.bbq||{},y=s.event.special,b="hashchange",$="querystring",x="fragment",j="elemUrlAttr",w="href",N="src",A=/^.*\?|#.*$/g,C={};function S(t){return"string"==typeof t}function q(t){var n=a.call(arguments,1);return function(){return t.apply(this,n.concat(a.call(arguments)))}}function E(t,n,e,r,o){var i,a,c,u,e=r!==p?(u=(a=e.match(t?d:/^([^#?]*)\??([^#]*)(#?.*)/))[3]||"",2===o&&S(r)?i=r.replace(t?h:A,""):(c=l(a[2]),r=S(r)?l[t?x:$](r):r,i=2===o?r:1===o?s.extend({},r,c):s.extend({},c,r),i=f(i),t&&(i=i.replace(m,g))),a[1]+(t?v:i||!a[1]?"?":"")+i+u):n(e!==p?e:location.href);return e}function R(t,n,e){return n=n===p||"boolean"==typeof n?(e=n,u[t?x:$]()):S(n)?n.replace(t?h:A,""):n,l(n,e)}function U(r,o,i,a){return S(i)||"object"==typeof i||(a=i,i=o,o=p),this.each(function(){var t=s(this),n=o||c()[(this.nodeName||"").toLowerCase()]||"",e=n&&t.attr(n)||"";t.attr(n,u[r](e,i,a))})}u[$]=q(E,0,function(t){return t.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}),u[x]=r=q(E,1,function(t){return t.replace(d,"$2")}),u.sorted=f=function(t,n){var o=[],i={};return s.each(u(t,n).split("&"),function(t,n){var e=n.replace(/(?:%5B|=).*$/,""),r=i[e];r||(r=i[e]=[],o.push(e)),r.push(n)}),s.map(o.sort(),function(t){return i[t]}).join("&")},r.noEscape=function(t){t=t||"";t=s.map(t.split(""),encodeURIComponent);m=new RegExp(t.join("|"),"g")},r.noEscape(",/"),r.ajaxCrawlable=function(t){return t!==p&&(v=t?(h=/^.*(?:#!|#)/,d=/^([^#]*)(?:#!|#)?(.*)$/,"#!"):(h=/^.*#/,d=/^([^#]*)#?(.*)$/,"#"),i=!!t),i},r.ajaxCrawlable(0),s.deparam=l=function(t,u){var f={},l={true:!0,false:!1,null:null};return s.each(t.replace(/\+/g," ").split("&"),function(t,n){var e,n=n.split("="),r=g(n[0]),o=f,i=0,a=r.split("]["),c=a.length-1,c=/\[/.test(a[0])&&/\]$/.test(a[c])?(a[c]=a[c].replace(/\]$/,""),(a=a.shift().split("[").concat(a)).length-1):0;if(2===n.length)if(e=g(n[1]),u&&(e=e&&!isNaN(e)?+e:"undefined"===e?p:l[e]!==p?l[e]:e),c)for(;i<=c;i++)o=o[r=""===a[i]?o.length:a[i]]=i<c?o[r]||(a[i+1]&&isNaN(a[i+1])?{}:[]):e;else s.isArray(f[r])?f[r].push(e):f[r]!==p?f[r]=[f[r],e]:f[r]=e;else r&&(f[r]=u?p:"")}),f},l[$]=q(R,0),l[x]=e=q(R,1),s[j]||(s[j]=function(t){return s.extend(C,t)})({a:w,base:w,iframe:N,img:N,input:N,form:"action",link:w,script:N}),c=s[j],s.fn[$]=q(U,$),s.fn[x]=q(U,x),t.pushState=n=function(t,n){S(t)&&/^#/.test(t)&&n===p&&(n=2);var e=t!==p,n=r(location.href,e?t:{},e?n:2);location.href=n},t.getState=o=function(t,n){return t===p||"boolean"==typeof t?e(t):e(n)[t]},t.removeState=function(t){var e={};t!==p&&(e=o(),s.each(s.isArray(t)?t:arguments,function(t,n){delete e[n]})),n(e,2)},y[b]=s.extend(y[b],{add:function(t){var n;function e(t){var e=t[x]=r();t.getState=function(t,n){return t===p||"boolean"==typeof t?l(e,t):l(e,n)[t]},n.apply(this,arguments)}if(s.isFunction(t))return n=t,e;n=t.handler,t.handler=e}})}(jQuery),
/*!
 * jQuery hashchange event - v1.3 - 7/21/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
function(o,e){var t,r,i,n,a,c,u,f="hashchange",l=document,s=o.event.special,p=l.documentMode,h="on"+f in e&&(void 0===p||7<p);function d(t){return"#"+(t=t||location.href).replace(/^[^#]*#?(.*)$/,"$1")}function m(t){return t}function v(){var t=d(),n=u(a);t!==a?(c(a=t,n),o(e).trigger(f)):n!==a&&(location.href=location.href.replace(/#.*/,"")+n),r=setTimeout(v,o.fn[f].delay)}o.fn[f]=function(t){return t?this.bind(f,t):this.trigger(f)},o.fn[f].delay=50,s[f]=o.extend(s[f],{setup:function(){if(h)return!1;o(t.start)},teardown:function(){if(h)return!1;o(t.stop)}}),s={},a=d(),u=c=m,s.start=function(){r||v()},s.stop=function(){r&&clearTimeout(r),r=void 0},o.browser.msie&&!h&&(s.start=function(){i||(n=(n=o.fn[f].src)&&n+d(),i=o('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){n||c(d()),v()}).attr("src",n||"javascript:0").insertAfter("body")[0].contentWindow,l.onpropertychange=function(){try{"title"===event.propertyName&&(i.document.title=l.title)}catch(t){}})},s.stop=m,u=function(){return d(i.location.href)},c=function(t,n){var e=i.document,r=o.fn[f].domain;t!==n&&(e.title=l.title,e.open(),r&&e.write('<script>document.domain="'+r+'"<\/script>'),e.close(),i.location.hash=t)}),t=s}(jQuery,this);